<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>JSON data send</title>
<!-- bootstrap CDN연결 -->
<!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous"> -->
<!--  local 연결 -->
<link href="/bootstrap_5_3/css/bootstrap.min.css" rel="stylesheet" >

</head>
<body>	
	<div class="container">
		<h1>JSON data 보내기2</h1>
		<hr>
		<input type="button"  class="btn btn-success mb-3"
				id="checkJson" 
				value="게시글 목록 /GET">
		<input type="button"  class="btn btn-success mb-3"
				id="aritcleView" 
				value="게시글 조회하기 /GET">
		<input type="button"  class="btn btn-success mb-3"
				id="articleWrite" 
				value="글 쓰기 /POST">
		<input type="button"  class="btn btn-success mb-3"
				id="articleModify" 
				value="글 수정하기 /PUT">
		<input type="button"  class="btn btn-success mb-3"
				id="articleDelete" 
				value="글 삭제하기 /DELETE">
		<hr>
		<div>
			<h2>Axios: node.js와 브라우저를 위한 Promise기반 HTTP클라이언트</h2>
			<input type="button"  class="btn btn-success mb-3"
				id="articleview2" onClick="articleView()"
				value="조회하기">
		</div>
		<hr>
		<div>text(data)</div>
		<div id="result" class="border p-3 alert alert-success"></div>
		<hr>
		<div>text(JSON.stringify(data))</div>
		<div id="result2" class="border p-3 alert alert-success"></div>
		<div>서버 로그 창 참조</div>
	</div>
	


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

<!-- 게시글 목록 -->
<script type="text/javascript">
$(function(){
	// 게시글 목록
	$("#checkJson").click(function(){
		console.log("게시글 목록");
		
		$.ajax({
			type: "get",
			url: "/boards/all",
			contentType: "application/json",
			
			success: function(data){  // data: 리턴받은 데이터
				console.log("success");
				
				$("#result").text(data);
				$("#result2").text(JSON.stringify(data));
				
			},
			error: function(){
				console.log("error")
			},
			complete: function(){
				console.log("compolete")
			}
		});
	});
	
});  
</script>

<!-- 게시글 등록 -->
<script>
$(function() {
	// 게시글 등록
	$("#articleWrite").click(function(){
		console.log("게시글 등록")
		var articleVO = {
				articleNO: "114",
				title: "Hello",
				write: "홍길동114",
				content: "상품 소개 글 입니다."
		}
		
		$.ajax({
			type:"post",
			url: "/boards/add",
			contentType: "application/json",
			data: JSON.stringify(articleVO),
			
			success: function(data){  // data: 리턴받은 데이터
				console.log("success");
				
				$("#result").text(data);
				$("#result2").text(JSON.stringify(data));
				
			},
			error: function(){
				console.log("error")
			},
			complete: function(){
				console.log("compolete")
			}
		});
	});	
})
</script>

<!-- 게시글 조회 -->
<script>
$(function() {
	// 게시글 조회
	$("#aritcleView").click(function(){
		console.log("게시글 조회");
		var articleNO = "116";
		
		
		$.ajax({
			type:"get",
			url: "/boards/find/"+articleNO,
			contentType: "application/json",
			
			success: function(data){  // data: 리턴받은 데이터
				console.log("success");

				$("#result").text(data);
				$("#result2").text(JSON.stringify(data));
				
			},
			error: function(){
				console.log("error")
			},
			complete: function(){
				console.log("compolete")
			}
		});
	});
});
</script>

<!-- 게시글 수정 -->
<script>
$(function() {
	// 게시글 수정
	$("#articleModify").click(function(){
		console.log("게시글 수정");
		var articleVO = {
				articleNO: "114",
				title: "Hello",
				write: "홍길동114",
				content: "상품 소개 글 입니다."
		}
		
		//console.log("JSON객체:",articleVO)
		//console.log("JSON객체 문자열:",JSON.stringify(articleVO))
		
		$.ajax({
			
			// PUT방식으로 요청: 수정 작업
			type: "put",
			url: "/boards/mod/114",
			contentType: "application/json",
			data: JSON.stringify(articleVO),
			
			success: function(data){  // data: 리턴받은 데이터
				console.log("success");
				
				$("#result").text(data);
				$("#result2").text(JSON.stringify(data));
				
			},
			error: function(){
				console.log("error")
			},
			complete: function(){
				console.log("compolete")
			}
		});
	});
		
})
</script>

<!-- 게시글 삭제 -->
<script>
$(function() {
	// 게시글 삭제
	$("#articleDelete").click(function(){
		console.log("게시글 삭제")
		var articleNO = "114";
		
		
		$.ajax({
			type:"delete",
			url: "/boards/remove/"+articleNO,
			contentType: "application/json",
			
			success: function(data){  // data: 리턴받은 데이터
				console.log("success");

				$("#result").text(data);
				$("#result2").text(JSON.stringify(data));
				
			},
			error: function(){
				console.log("error")
			},
			complete: function(){
				console.log("compolete")
			}
		});
	});
})
</script>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

<!-- Axios -->
<script>
function articleView() {
	console.log("articleView()");
	
	let articleNO = 116;
	
	axios({
		method: 'get',
		url: '/boards/find/'+articleNO
	})
	
	.then((response)=> {
		console.log("서버로부터 응답 받은 객체: ",response);
		console.log("서버로부터 응답 받은 객체 data속성: ",response.data);
		console.log("서버로부터 응답 받은 객체 data속성에 있는 값: ",response.data.articleNO);
	})
	
}
</script>


</body>
</html>