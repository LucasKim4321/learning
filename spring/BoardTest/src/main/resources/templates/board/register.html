<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultrag.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/basic}">


<!-- í˜„ì¬ í˜ì´ì§€ì—ì„œë§Œ ì‚¬ìš©í•˜ëŠ” ì»¨í…ì¸ (ë‚´ìš©) ì •ì˜ -->
<div layout:fragment="content">
    <div class="card">
        <div class="card-header">
            board register
        </div>

        <!-- ê²Œì‹œê¸€ ë¦¬ìŠ¤íŠ¸ -->
        <div class="card-body">
            <form action="/board/register" method="post" id="createBoardForm">
                <div class="mb-3 row">
                    <label for="title" class="col-form-label ps-4">title</label>
                    <div class="col">
                        <input type="text" class="form-control" id="title" name="title">
                    </div>
                </div>

                <div class="mb-3 row">
                    <label for="content" class="col-form-label ps-4">content</label>
                    <div class="col">
                        <textarea class="form-control" id="content" name="content"></textarea>
                    </div>
                </div>

                <div class="mb-3 row">
                    <label for="writer" class="col-form-label ps-4">writer</label>
                    <div class="col">
                        <input type="text" class="form-control" id="writer" name="writer" value="tester">
                    </div>
                </div>

                <!-- í˜„ì¬ ë¡œê·¸ì¸ ì‚¬ìš©ìì™€ ê²Œì‹œê¸€ ì‘ì„±ìê°€ ë™ì¼í•œì§€ íŒë³„í•˜ê¸° ìœ„í•œ í•­ëª© -->
                <div class="mb-3 row">
                    <label for="writerId" class="col-form-label ps-4">ID</label>
                    <div class="col">
                        <input type="text" class="form-control" id="writerId" name="writerId" value="test">
                    </div>
                </div>

                <div class="mt-3 d-flex">
                    <a th:href="|@{/board/list?}${link}|" class="link-underline-none">
                        <button type="button" class="btn btn-outline-secondary opacity-50 listBtn">List</button>
                    </a>
                    <div class="ms-auto">
                        <!-- id ì´ë¦„ì„ submit, reset ì´ëŸ° ê¸°ëŠ¥ìˆëŠ” ì• ë“¤ë¡œ ì£¼ë©´ í•´ë‹¹ ê¸°ëŠ¥ì´ ë™ì‘ ì•ˆí•¨ -->
                        <button type="reset" class="btn btn-outline-warning opacity-50 clearBtn">clear</button>
                        <button type="submit" class="btn btn-outline-success opacity-50 submitBtn">submit</button>
                    </div>
                </div>
            </form>

        </div> <!-- end card-body-->

    </div> <!-- end card -->

</div> <!-- end fragment="content"-->


<!-- í˜„ì¬ í˜ì´ì§€ì—ì„œë§Œ ì‚¬ìš©í•˜ëŠ” css ì •ì˜ -->
<style layout:fragment="mystyle" th:inline="css">
    #content{
        height:500px;
    }
    .col-form-label {
        width:100px;
    }
</style>

<!-- í˜„ì¬ í˜ì´ì§€ì—ì„œë§Œ ì‚¬ìš©í•˜ëŠ” script ì •ì˜ -->
<script layout:fragment="myscript" th:inline="javascript">

    // ------------------------------------------------ //
    // ê²Œì‹œë¬¼ ë“±ë¡ : ê²Œì‹œê¸€ ì •ë³´, ì²¨ë¶€íŒŒì¼ì´ë¦„ DBì— ì €ì¥ ìš”ì²­
    // ------------------------------------------------ //

    document.querySelector('.submitBtn').addEventListener('click', function(e) {
        e.preventDefault();  // ê¸°ë³¸ ì´ë²¤íŠ¸ ì œê±°
        e.stopPropagation();  // ë²„ë¸”ë§(í˜„ì¬ ì´ë²¤íŠ¸ê°€ ë°œìƒí•œ ìš”ì†Œì˜ ìƒìœ„ ìš”ì†Œë“¤ì— ëŒ€í•´ì„œ ì´ë²¤íŠ¸ ê°ì§€ë˜ëŠ” í˜„ìƒ) ë°©ì§€

        const formObj = document.querySelector('#createBoardForm');
        const title = document.querySelector('#title');
        const content = document.querySelector('#content');
        const writer = document.querySelector('#writer');
        console.log(title.value);

        if ((title.value.length < 1 || title.value == "")&&(content.value.length < 1 || content.value == "")) {
            alert("ì œëª©ê³¼ ë‚´ìš©ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤!! ğŸ˜¡ğŸ˜¡");
            return;

        } else if (title.value.length < 1 || title.value == "") {
            alert("ì œëª©ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤! ğŸ˜¡");
            return;

        } else if (content.value.length < 1 || content.value == "") {
            alert("ë‚´ìš©ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤! ğŸ˜¡");
            return;

        }

        if (title.value.length < 3 || title.value.length > 100) {
            alert("3ì ì´ìƒ 100ì ì´ë‚´ì— ì œëª©ì„ ì¨ì£¼ì„¸ìš”~ :b");
            title.focus();
            return;

        }

        if (content.value.length < 3 || content.value.length > 1000) {
            alert("3ì ì´ìƒ 1000ì ì´ë‚´ì— ê¸€ì„ ì¨ì£¼ì„¸ìš”~ :b");
            content.focus();
            return;

        }


        // ê°’ì— ì´ìƒì´ ì—†ìœ¼ë©´ ì„œë²„ì— ì „ì†¡
        console.log(formObj);

        // html íƒœê·¸ì˜ id ì´ë¦„ì„ submit, reset ì´ëŸ° ê¸°ëŠ¥ìˆëŠ” ì• ë“¤ë¡œ ì£¼ë©´ í•´ë‹¹ ê¸°ëŠ¥ì´ ë™ì‘ ì•ˆí•¨
        // id="submit"ìœ¼ë¡œ ë²„íŠ¼ì— IDë¥¼ ì„¤ì •í•˜ë©´, ê¸°ë³¸ì ìœ¼ë¡œ document ê°ì²´ì—ì„œ submit() ë©”ì„œë“œë¥¼ ë®ì–´ì“°ê²Œ ë©ë‹ˆë‹¤. ì´ ë•Œë¬¸ì— submit() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ë„ í•´ë‹¹ ë©”ì„œë“œê°€ ì•„ë‹ˆë¼ ë²„íŠ¼ ìš”ì†Œë¥¼ ì°¸ì¡°í•˜ê²Œ ë˜ì–´ í¼ì´ ì œì¶œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

        formObj.submit();


    })


    // ë¦¬ì…‹ ë²„íŠ¼

    document.querySelector('.clearBtn').addEventListener('click', function(e) {
        e.preventDefault();  // ê¸°ë³¸ ì´ë²¤íŠ¸ ì œê±°
        e.stopPropagation();  // ë²„ë¸”ë§(í˜„ì¬ ì´ë²¤íŠ¸ê°€ ë°œìƒí•œ ìš”ì†Œì˜ ìƒìœ„ ìš”ì†Œë“¤ì— ëŒ€í•´ì„œ ì´ë²¤íŠ¸ ê°ì§€ë˜ëŠ” í˜„ìƒ) ë°©ì§€

        location.href="/board/register";
    })



</script>


</html>